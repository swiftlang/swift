# Make a local copy of the substitutions.
config.substitutions = list(config.substitutions)

clang_compile_opt = '-I' + config.swiftlib_dir + ' '

config.substitutions.insert(0, ('%check-interop-cxx-file-in-clang\(([^)]+)\)',
                             SubstituteCaptures(r'%check-cxx-header-in-clang -x c++ -std=c++14 -Wno-padded -Wno-c11-extensions -D_LIBCPP_CSTDLIB ' + clang_compile_opt + r'\1 && '
                                                r'%check-cxx-header-in-clang -x c++ -std=c++17 -Wno-padded -Wno-c11-extensions -D_LIBCPP_CSTDLIB ' + clang_compile_opt + r'\1 && '
                                                r'%check-cxx-header-in-clang -x c++ -std=c++20 -Wno-padded -Wno-c11-extensions -D_LIBCPP_CSTDLIB ' + clang_compile_opt + r'\1')))
