# RUN: %empty-directory(%t)
# RUN: %empty-directory(%t/build)
# RUN: %empty-directory(%t/out)
# RUN: export PATH="%original_path_env"
# RUN: export SWIFTCI_USE_LOCAL_DEPS=1
# RUN: export SWIFT_BACKTRACE=

# REQUIRES: OS=macosx
# REQUIRES: standalone_build
# REQUIRES: target-same-as-host

# Run the xcodegen test suite
# RUN: xcrun swift-test -c release --disable-dependency-cache --disable-automatic-resolution --package-path %swift_src_root/utils/swift-xcodegen --scratch-path %t/build

# Then check to see that xcodegen can generate a project successfully
# RUN: xcrun swift-run -c release --disable-dependency-cache --disable-automatic-resolution --skip-build --package-path %swift_src_root/utils/swift-xcodegen --scratch-path %t/build swift-xcodegen --project-root-dir %swift_src_root/.. --output-dir %t/out %swift_obj_root/..
# RUN: ls %t/out/Swift.xcodeproj > /dev/null
