# REQUIRES: standalone_build
# UNSUPPORTED: OS=macosx
# UNSUPPORTED: OS=ios
# UNSUPPORTED: OS=tvos
# UNSUPPORTED: OS=watchos

# RUN: %empty-directory(%t)
# RUN: mkdir -p %t
# RUN: SWIFT_BUILD_ROOT=%t %swift_src_root/utils/build-script --dry-run --foundation --cmake %cmake  2>&1 | %FileCheck --check-prefix=CLEAN-CORELIBS-CHECK %s

# RUN: %empty-directory(%t)
# RUN: mkdir -p %t
# RUN: SWIFT_BUILD_ROOT=%t %swift_src_root/utils/build-script --dry-run --foundation --skip-clean-libdispatch --skip-clean-foundation --cmake %cmake  2>&1 | %FileCheck --check-prefix=SKIP-CLEAN-CORELIBS-CHECK %s

# CLEAN-CORELIBS-CHECK: Cleaning the libdispatch build directory
# CLEAN-CORELIBS-CHECK-NEXT: rm -rf
# CLEAN-CORELIBS-CHECK: Cleaning the Foundation build directory
# CLEAN-CORELIBS-CHECK-NEXT: rm -rf

# SKIP-CLEAN-CORELIBS-CHECK-NOT: Cleaning the libdispatch build directory
# SKIP-CLEAN-CORELIBS-CHECK-NOT: rm -rf {{.*/libdispatch-[^/]*}}
# SKIP-CLEAN-CORELIBS-CHECK-NOT: Cleaning the Foundation build directory
# SKIP-CLEAN-CORELIBS-CHECK-NOT: rm -rf {{.*/foundation-[^/]*}}
